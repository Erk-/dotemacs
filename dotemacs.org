#+TITLE: DotEmacs
#+AUTHOR: Valdemar Erk
* Table of content                                                      :TOC:
- [[#bootstrap][Bootstrap]]
  - [[#user-information][User information]]
  - [[#gpg-setup][GPG Setup]]
  - [[#initial-setup][Initial setup]]
  - [[#authentication][Authentication]]
- [[#gui][Gui]]
  - [[#intro][Intro]]
  - [[#modeline][Modeline]]
  - [[#theme][Theme]]
  - [[#fonts][Fonts]]
  - [[#goggles][Goggles]]
- [[#editor][Editor]]
  - [[#editorconfig][EditorConfig]]
  - [[#parinfer--smart-parens][Parinfer / Smart Parens]]
  - [[#temple][Temple]]
- [[#org-mode][Org mode]]
- [[#rss][RSS]]
- [[#vertico][Vertico]]
- [[#mail-wanderlust][Mail [Wanderlust]]]
- [[#lsp][LSP]]
- [[#zig][Zig]]
- [[#rust][Rust]]
- [[#typst][Typst]]
- [[#magit][Magit]]
- [[#consult][Consult]]
- [[#transient][Transient]]
- [[#work][Work]]
- [[#misc][Misc]]
  - [[#pdf-viewer][PDF viewer]]
  - [[#futhark][Futhark]]
  - [[#eat][EAT]]
  - [[#scratch][Scratch]]
  - [[#rg][RG]]
- [[#keybinds][Keybinds]]

* Bootstrap
** User information
#+BEGIN_SRC emacs-lisp
(setq user-full-name "Valdemar Erk"
      user-mail-address "valdemar@erk.dev")
#+END_SRC
** GPG Setup
#+BEGIN_SRC emacs-lisp
;; Get pin-code popup in emacs.
(setq epa-pinentry-mode 'loopback)
(setq epg-pinentry-mode 'loopback)

;; If there is a Yubikey use it.
;; (if (< 0 (length (shell-command-to-string "ykman list")))
;;     (setq auth-sources '("~/.authinfo.gpg"))
;;   (setq auth-sources '("~/.authinfo")))
(setq auth-sources '("~/.authinfo"))
#+END_SRC
** Initial setup
#+BEGIN_SRC emacs-lisp
(setq custom-file "~/.config/emacs-custom.el")
(if (file-readable-p custom-file)
    (load custom-file))

(set-language-environment "UTF-8")
(setq
 backup-by-copying      t                         ; don't clobber symlinks
 backup-directory-alist '(("." . "~/.saves/"))    ; don't litter my fs tree
 delete-old-versions    t
 kept-new-versions      8
 kept-old-versions      8
 version-control        t)                        ; use versioned backups

;; Danish calender
(load-file "~/.emacs.d/lisp/da-kalender.el")

(setq exec-path (append exec-path '("/home/erk/.cargo/bin")))
(straight-use-package 'transient)
(require 'transient)
#+END_SRC
** Authentication
#+begin_src emacs-lisp
; https://tobytripp.github.io/emacs.d/mail-in-emacs.html
(defun erk/auth-info (&rest search-spec)
  "Given a LOGIN to search for, return `auth-sources' that match.

Valid search keys are:

  - :user
  - :host
  - :port

Setting :max will have no result as this function only returns a
single result.  If there are multiple matches, the first will be
returned.

Results are returned as an alist with the `:secret' property
pre-evaluated."

  (dolist (default '((:max . 1) (:require . (:secret))))
    (plist-put search-spec (car default) (cdr default)))

  (let ((entry (nth 0 (apply 'auth-source-search search-spec))))
    (mapcar (lambda (e)
              (let ((prop  (car e))
                    (value (if (functionp (cadr e))
                               (funcall (cadr e))
                             (cadr e))))
                (cons prop value)))
            (seq-partition entry 2))))
#+end_src
* Gui
** Intro
Set up some small things to start with:
#+BEGIN_SRC emacs-lisp
;; Turn off start screen.
(setq inhibit-startup-screen t)

;; Turn off tool-bar-mode.
(when (fboundp 'tool-bar-mode)
  (tool-bar-mode -1))

;; Turn off the menu bar.
(menu-bar-mode -1)

;; Don't blink the cursor.
(blink-cursor-mode -1)

;; enable column-number-mode.
(column-number-mode 1)

;; Remove the scroll bar.
(scroll-bar-mode -1)

;; Fix strange size issues with tiling wms
(setq frame-resize-pixelwise t)

;;(straight-use-package '(stillness-mode :host github :repo "neeasade/stillness-mode.el" :branch "main"))

;; Fix emacs in River VM.
(setq default-frame-alist '((undecorated . t)))
#+END_SRC

Set up scrolling
#+BEGIN_SRC emacs-lisp
;; makes scrolling a bit less jumpy.
(setq mouse-wheel-follow-mouse      t                   ;; scroll window under mouse
      scroll-step                   1                   ;; keyboard scroll one line at a time
      mouse-wheel-progressive-speed nil                 ;; don't accelerate scrollin
      mouse-wheel-scroll-amount     '(1 ((shift) . 1))) ;; one line at a time

(use-package ultra-scroll
  :straight (ultra-scroll
	     :type git
	     :host github
	     :repo "jdtsmith/ultra-scroll")
  :init
  (setq scroll-conservatively 101 ; important!
        scroll-margin 0) 
  :config
  (ultra-scroll-mode 1))
#+END_SRC

Set up some ansi colours.
#+BEGIN_SRC emacs-lisp
;(setq ansi-color-faces-vector
;      [default default default italic underline success warning error])
#+END_SRC

Clean up the mode-line
#+begin_src emacs-lisp
(straight-use-package 'blackout)
(blackout 'goggles-mode)
(blackout 'editorconfig-mode)
;(blackout 'yas-minor-mode)
#+end_src
** Modeline
#+begin_src emacs-lisp
;; Installer ikoner
(straight-use-package 'all-the-icons)
#+end_src
** Theme
We start by setting the paren mode to blocks:
#+BEGIN_SRC emacs-lisp
(show-paren-mode t)
;; (setq show-paren-style 'expression)

(use-package moe-theme)

;; Show highlighted buffer-id as decoration. (Default: nil)
(setq moe-theme-highlight-buffer-id t)

;; Resize titles (optional).
(setq moe-theme-resize-title-markdown '(1.5 1.4 1.3 1.2 1.0 1.0))
(setq moe-theme-resize-title-org '(1.5 1.4 1.3 1.2 1.1 1.0 1.0 1.0 1.0))
(setq moe-theme-resize-title-rst '(1.5 1.4 1.3 1.2 1.1 1.0))

;; Choose a color for modeline.(Default: blue)
(setq moe-theme-modeline-color 'cyan)

;; Finally, apply moe-theme now.
;; Choose what you like, (moe-light) or (moe-dark)
(moe-dark)
#+END_SRC
** Fonts
Set up fonts
#+BEGIN_SRC emacs-lisp
;; Force use of harfbuzz
(add-to-list 'initial-frame-alist '(font-backend  . (harfbuzz)))
(add-to-list 'default-frame-alist '(font-backend  . (harfbuzz)))

(defvar erk/font "Cascadia Code PL SemiLight-13" "Default font")

;; Berkerley Mono
(setq erk/font "TX-02-10:style=Regular")

(add-to-list 'default-frame-alist `(font . ,erk/font))
;; This is done in a slightly odd way to ensure it is set when
;; starting from deamon mode.
(set-frame-font erk/font nil t)
#+END_SRC
** Goggles
#+begin_src emacs-lisp
(use-package goggles
  :hook ((prog-mode text-mode) . goggles-mode)
  :config
  (setq-default goggles-pulse t))
#+end_src
* Editor
Indent with spaces
#+BEGIN_SRC emacs-lisp
(setq-default indent-tabs-mode nil)
(setq indent-tabs-mode nil)
#+END_SRC

Install rainbow delimiters
#+BEGIN_SRC emacs-lisp
(use-package rainbow-delimiters)
(add-hook 'prog-mode-hook #'rainbow-delimiters-mode)
#+END_SRC

Install multiple-cursors, the keybinds are in the last chapter
#+BEGIN_SRC emacs-lisp
(use-package multiple-cursors)
#+END_SRC
** EditorConfig
#+begin_src emacs-lisp
(use-package editorconfig
  :blackout
  :ensure t
  :config
  (editorconfig-mode 1))
#+end_src
** Parinfer / Smart Parens
#+begin_src emacs-lisp
(use-package parinfer-rust-mode
    :hook emacs-lisp-mode
    :init
    (setq parinfer-rust-auto-download t))
#+end_src
** Temple
#+BEGIN_SRC emacs-lisp
;; ;; Configure Tempel
;; (use-package tempel
;;   ;; Require trigger prefix before template name when completing.
;;   :custom
;;   (tempel-trigger-prefix "<")

;;   :bind (("M--" . tempel-complete) ;; Alternative tempel-expand
;;          ("M-'" . tempel-insert))

;;   :init

;;   ;; Setup completion at point
;;   (defun tempel-setup-capf ()
;;     ;; Add the Tempel Capf to `completion-at-point-functions'.
;;     ;; `tempel-expand' only triggers on exact matches. Alternatively use
;;     ;; `tempel-complete' if you want to see all matches, but then you
;;     ;; should also configure `tempel-trigger-prefix', such that Tempel
;;     ;; does not trigger too often when you don't expect it. NOTE: We add
;;     ;; `tempel-expand' *before* the main programming mode Capf, such
;;     ;; that it will be tried first.
;;     (setq-local completion-at-point-functions
;;                 (cons #'tempel-complete
;;                       completion-at-point-functions)))

;;   (add-hook 'conf-mode-hook 'tempel-setup-capf)
;;   (add-hook 'prog-mode-hook 'tempel-setup-capf)
;;   (add-hook 'text-mode-hook 'tempel-setup-capf)

;;   ;; Optionally make the Tempel templates available to Abbrev,
;;   ;; either locally or globally. `expand-abbrev' is bound to C-x '.
;;   ;; (add-hook 'prog-mode-hook #'tempel-abbrev-mode)
;;   ;; (global-tempel-abbrev-mode)
;; )
#+END_SRC
* Org mode
Will have to be cleaned up!
#+BEGIN_SRC emacs-lisp
(setq org-src-preserve-indentation t
      org-edit-src-content-indentation 0)

;; (use-package org-superstar
;;   :ensure t)

(use-package toc-org
  :ensure t
  :init
  (add-hook 'org-mode-hook #'toc-org-mode))
#+END_SRC
* RSS
Install elfeed
#+BEGIN_SRC emacs-lisp
(use-package elfeed)
#+END_SRC

Set up list of feeds
#+BEGIN_SRC emacs-lisp
(when (load "~/org/feeds.el" t)
       (require 'feeds))
#+END_SRC
* Vertico
#+BEGIN_SRC emacs-lisp
(straight-use-package 'prescient)
(use-package vertico
  :straight (:files (:defaults "extensions/*"))
  :init
  (vertico-mode))
(straight-use-package 'vertico-prescient)

(vertico-prescient-mode +1)
(prescient-persist-mode +1)

;; Nicer movement between layers
(define-key vertico-map (kbd "C-<left>") 'vertico-directory-up)
(define-key vertico-map (kbd "C-<right>") 'vertico-insert)
;; Just so you don't have to keep releasing ctrl.
(define-key vertico-map (kbd "C-<up>") 'vertico-previous)
(define-key vertico-map (kbd "C-<down>") 'vertico-next)

(use-package marginalia
  :bind (:map minibuffer-local-map
              ("M-A" . marginalia-cycle))
  :init
  (marginalia-mode))
#+END_SRC
* Mail [Wanderlust]
We start by setting up smtpmail
#+BEGIN_SRC emacs-lisp
(setq wl-draft-send-mail-function 'wl-draft-send-mail-with-smtp
      smtpmail-debug-info t
      smtpmail-default-smtp-server "smtp.fastmail.com"
      smtpmail-local-domain "erk.dev"
      smtpmail-smtp-user "valdemar@erk.dev"
      smtpmail-smtp-server "smtp.fastmail.com"
      smtpmail-stream-type 'ssl
      smtpmail-smtp-service 465
)
#+END_SRC

We then setup wanderlust, here it should be noted a large part of the
config resides in ~~/.wl~.
#+BEGIN_SRC emacs-lisp
(straight-override-recipe
 '(semi :host github :repo "wanderlust/semi" :branch "semi-1_14-wl"))
(straight-override-recipe
 '(flim :host github :repo "wanderlust/flim" :branch "flim-1_14-wl"))
(straight-override-recipe
 '(apel :host github :repo "wanderlust/apel" :branch "apel-wl"))
(straight-override-recipe
 '(wanderlust :host github :repo "wanderlust/wanderlust" :branch "master"))

(use-package wanderlust
  :ensure t
  :no-require t)

;;Wanderlust
(require 'wl)
(autoload 'wl "wl" "Wanderlust" t)
(autoload 'wl-other-frame "wl" "Wanderlust on new frame." t)
(autoload 'wl-draft "wl-draft" "Write draft with Wanderlust." t)

;; Lidt mere af emnelinjen i `summary-mode`
(setq wl-summary-width 120)
(setq wl-summary-line-format "%n%T%P%M/%D(%W)%h:%m %t%[%26(%c %f%) %] %s")

;; Use ~/.authinfo.gpg for password store
(setq elmo-passwd-storage-type 'auth-source)

;; Open ~/.wl in emacs lisp mode.
(add-to-list 'auto-mode-alist '("\.wl$" . emacs-lisp-mode))
#+END_SRC

For Lobste.rs we use POP3 to not fill the mailserver up.
#+begin_src emacs-lisp
(setq elmo-maildir-folder-path "~/Mail")
#+end_src
* LSP
Install lsp mode
#+BEGIN_SRC emacs-lisp
(require 'eglot)

(setq eglot-code-action-indicator "»")

;; (use-package eglot-booster
;;   :straight (eglot-booster
;; 	     :type git
;; 	     :host github
;; 	     :repo "jdtsmith/eglot-booster"
;; 	     :files ("*.el"))
;;   :after eglot
;;   :config (eglot-booster-mode))

;; (use-package eglot-tempel
;;   :preface (eglot-tempel-mode)
;;   :init
;;   (eglot-tempel-mode t))

(setq eglot-inlay-hints-mode nil) ;; This does not work
(setq eglot-ignored-server-capabilities '(:inlayHintProvider))
(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               '((rust-ts-mode rust-mode rustic-mode) .
                 ("rust-analyzer" :initializationOptions
                  ( :procMacro (:enable t)
                    :cargo ( :buildScripts (:enable t)))))))

(use-package corfu
  :custom
  (corfu-auto t)          ;; Enable auto completion
  (corfu-quit-no-match 'separator)
  ;; (corfu-separator ?_) ;; Set to orderless separator, if not using space
  :bind
  ;; Another key binding can be used, such as S-SPC.
  (:map corfu-map ("H-SPC" . corfu-insert-separator))
  :init
  (global-corfu-mode))

(setq completion-cycle-threshold 3)

;; A few more useful configurations...
(use-package emacs
  :custom
  ;; TAB cycle if there are only few candidates
  ;; (completion-cycle-threshold 3)

  ;; Enable indentation+completion using the TAB key.
  ;; `completion-at-point' is often bound to M-TAB.
  (tab-always-indent 'complete)

  ;; Emacs 30 and newer: Disable Ispell completion function.
  ;; Try `cape-dict' as an alternative.
  (text-mode-ispell-word-completion nil)

  ;; Hide commands in M-x which do not apply to the current mode.  Corfu
  ;; commands are hidden, since they are not used via M-x. This setting is
  ;; useful beyond Corfu.
  (read-extended-command-predicate #'command-completion-default-include-p))
#+END_SRC
* Zig
#+BEGIN_SRC emacs-lisp
(straight-use-package 'zig-mode)
#+END_SRC
* Rust
Install packages needed for rustic with rust-analyzer
#+BEGIN_SRC emacs-lisp
(straight-use-package
 '(rustic :type git
          :host github
          :repo "emacs-rustic/rustic"))
(setq rustic-lsp-client 'eglot)
#+END_SRC

Initialize and configure rustic
#+BEGIN_SRC emacs-lisp
(add-hook 'rust-mode-hook #'rust-ts-mode)
;; (remove-hook 'rustic-mode-hook 'flycheck-mode)
#+END_SRC
* Typst
#+BEGIN_SRC emacs-lisp
(use-package typst-ts-mode
  :straight '(:type git :host codeberg :repo "meow_king/typst-ts-mode"))

(with-eval-after-load 'eglot
  (with-eval-after-load 'typst-ts-mode
    (add-to-list 'eglot-server-programs
                 `((typst-ts-mode) .
                   ,(eglot-alternatives `(,typst-ts-lsp-download-path
                                          "tinymist"
                                          "typst-lsp"))))))
(setq-default eglot-workspace-configuration
              '(:tinymist (:exportPdf "onSave")))

(use-package websocket)
(use-package typst-preview
  :straight '(:type git :host github :repo "havarddj/typst-preview.el"))
#+END_SRC
* Magit
Install Magit and magit forge and setup ssh agent
#+begin_src emacs-lisp
(use-package magit)
(use-package forge
  :after magit)
 ;; (use-package orgit-forge)

 ;; (use-package exec-path-from-shell)
 ;; (exec-path-from-shell-copy-env "SSH_AGENT_PID")
 ;; (exec-path-from-shell-copy-env "SSH_AUTH_SOCK")

;; (use-package keychain-environment
;;   :init
;;   (keychain-refresh-environment))

(use-package magit-todos
  :after magit
  :config (magit-todos-mode 1))
#+end_src
* Consult
#+BEGIN_SRC emacs-lisp
;; Example configuration for Consult
(use-package consult
  ;; Replace bindings. Lazily loaded by `use-package'.
  :bind (;; C-c bindings in `mode-specific-map'
         ("C-c M-x" . consult-mode-command)
         ("C-c h" . consult-history)
         ("C-c k" . consult-kmacro)
         ("C-c m" . consult-man)
         ("C-c i" . consult-info)
         ([remap Info-search] . consult-info)
         ;; C-x bindings in `ctl-x-map'
         ("C-x M-:" . consult-complex-command)     ;; orig. repeat-complex-command
         ("C-x b" . consult-buffer)                ;; orig. switch-to-buffer
         ("C-x 4 b" . consult-buffer-other-window) ;; orig. switch-to-buffer-other-window
         ("C-x 5 b" . consult-buffer-other-frame)  ;; orig. switch-to-buffer-other-frame
         ("C-x t b" . consult-buffer-other-tab)    ;; orig. switch-to-buffer-other-tab
         ("C-x r b" . consult-bookmark)            ;; orig. bookmark-jump
         ("C-x p b" . consult-project-buffer)      ;; orig. project-switch-to-buffer
         ;; Custom M-# bindings for fast register access
         ("M-#" . consult-register-load)
         ("M-'" . consult-register-store)          ;; orig. abbrev-prefix-mark (unrelated)
         ("C-M-#" . consult-register)
         ;; Other custom bindings
         ("M-y" . consult-yank-pop)                ;; orig. yank-pop
         ;; M-g bindings in `goto-map'
         ("M-g e" . consult-compile-error)
         ("M-g r" . consult-grep-match)
         ("M-g f" . consult-flymake)               ;; Alternative: consult-flycheck
         ("M-g g" . consult-goto-line)             ;; orig. goto-line
         ("M-g M-g" . consult-goto-line)           ;; orig. goto-line
         ("M-g o" . consult-outline)               ;; Alternative: consult-org-heading
         ("M-g m" . consult-mark)
         ("M-g k" . consult-global-mark)
         ("M-g i" . consult-imenu)
         ("M-g I" . consult-imenu-multi)
         ;; M-s bindings in `search-map'
         ("M-s d" . consult-find)                  ;; Alternative: consult-fd
         ("M-s c" . consult-locate)
         ("M-s g" . consult-grep)
         ("M-s G" . consult-git-grep)
         ("M-s r" . consult-ripgrep)
         ("M-s l" . consult-line)
         ("M-s L" . consult-line-multi)
         ("M-s k" . consult-keep-lines)
         ("M-s u" . consult-focus-lines)
         ;; Isearch integration
         ("M-s e" . consult-isearch-history)
         :map isearch-mode-map
         ("M-e" . consult-isearch-history)         ;; orig. isearch-edit-string
         ("M-s e" . consult-isearch-history)       ;; orig. isearch-edit-string
         ("M-s l" . consult-line)                  ;; needed by consult-line to detect isearch
         ("M-s L" . consult-line-multi)            ;; needed by consult-line to detect isearch
         ;; Minibuffer history
         :map minibuffer-local-map
         ("M-s" . consult-history)                 ;; orig. next-matching-history-element
         ("M-r" . consult-history))                ;; orig. previous-matching-history-element

  ;; The :init configuration is always executed (Not lazy)
  :init

  ;; Tweak the register preview for `consult-register-load',
  ;; `consult-register-store' and the built-in commands.  This improves the
  ;; register formatting, adds thin separator lines, register sorting and hides
  ;; the window mode line.
  (advice-add #'register-preview :override #'consult-register-window)
  (setq register-preview-delay 0.5)

  ;; Use Consult to select xref locations with preview
  (setq xref-show-xrefs-function #'consult-xref
        xref-show-definitions-function #'consult-xref)

  ;; Configure other variables and modes in the :config section,
  ;; after lazily loading the package.
  :config

  ;; Optionally configure preview. The default value
  ;; is 'any, such that any key triggers the preview.
  ;; (setq consult-preview-key 'any)
  ;; (setq consult-preview-key "M-.")
  ;; (setq consult-preview-key '("S-<down>" "S-<up>"))
  ;; For some commands and buffer sources it is useful to configure the
  ;; :preview-key on a per-command basis using the `consult-customize' macro.
  (consult-customize
   consult-theme :preview-key '(:debounce 0.2 any)
   consult-ripgrep consult-git-grep consult-grep consult-man
   consult-bookmark consult-recent-file consult-xref
   consult-source-bookmark consult-source-file-register
   consult-source-recent-file consult-source-project-recent-file
   ;; :preview-key "M-."
   :preview-key '(:debounce 0.4 any))

  ;; Optionally configure the narrowing key.
  ;; Both < and C-+ work reasonably well.
  (setq consult-narrow-key "<")) ;; "C-+"

  ;; Optionally make narrowing help available in the minibuffer.
  ;; You may want to use `embark-prefix-help-command' or which-key instead.
  ;; (keymap-set consult-narrow-map (concat consult-narrow-key " ?") #'consult-narrow-help)

(use-package orderless
  :ensure t
  :init
  (setq completion-styles '(orderless basic)
        completion-category-defaults nil
        completion-category-overrides '((file (styles basic partial-completion)))))

(use-package affe
  :config
  ;; Manual preview key for `affe-grep'
  (consult-customize affe-grep :preview-key "m-o"))

(defun affe-orderless-regexp-compiler (input _type _ignorecase)
  (setq input (orderless-pattern-componsiler input))
  (cons input (apply-partially #'orderless--highlight input t)))
(setq affe-regexp-compiler #'affe-orderless-regexp-compiler)
#+END_SRC
* Transient
#+BEGIN_SRC emacs-lisp
(use-package transient)
(require 'rust-transient)
#+END_SRC

* Work
#+BEGIN_SRC emacs-lisp
(when (load "~/org/work.el" t)
       (require 'work))
#+END_SRC
* Misc
** PDF viewer
#+BEGIN_SRC emacs-lisp
(use-package pdf-tools
  :ensure t
  :init
  (pdf-tools-install))
#+END_SRC
** Futhark
#+BEGIN_SRC emacs-lisp
(use-package futhark-mode)
#+END_SRC
** EAT
#+BEGIN_SRC emacs-lisp
(straight-use-package
 '(eat :type git
       :host codeberg
       :repo "akib/emacs-eat"
       :files ("*.el" ("term" "term/*.el") "*.texi"
               "*.ti" ("terminfo/e" "terminfo/e/*")
               ("terminfo/65" "terminfo/65/*")
               ("integration" "integration/*")
               (:exclude ".dir-locals.el" "*-tests.el"))))
#+END_SRC
** Scratch
#+begin_src emacs-lisp
(straight-use-package 'scratch)
(global-set-key (kbd "C-c s") #'scratch)
#+end_src
** RG
#+begin_src emacs-lisp
(straight-use-package 'rg)
(global-set-key (kbd "C-c r") #'rg)
(global-set-key (kbd "C-c t") #'rg-menu)
#+end_src
* Keybinds
#+BEGIN_SRC emacs-lisp
;; Turn off the most annoying keybinds
(global-unset-key (kbd "<insert>"))
(global-unset-key (kbd "C-z"))

;; Windmove alt+←↓↑→
(windmove-default-keybindings 'meta)

;; (global-set-key (kbd "C-s") 'swiper)
;; (global-set-key (kbd "C-x b") 'ivy-switch-buffer)
;; (global-set-key (kbd "C-c C-r") 'ivy-resume)
;; (global-set-key (kbd "M-x") 'counsel-M-x)
;; (global-set-key (kbd "C-x C-f") 'counsel-find-file)

(global-set-key (kbd "<f9>") 'display-line-numbers-mode)
(global-set-key (kbd "<f12>") 'menu-bar-mode)

;; Org mode
;; (global-set-key (kbd "C-c l") 'org-store-link)
;; (global-set-key (kbd "C-c a") 'org-agenda)

;; Multiple cursors
(global-set-key (kbd "C-S-c C-S-c") 'mc/edit-lines)
(global-set-key (kbd "C->") 'mc/mark-next-like-this)
(global-set-key (kbd "C-<") 'mc/mark-previous-like-this)
(global-set-key (kbd "C-c C-<") 'mc/mark-all-like-this)

;; Eglot
(define-key eglot-mode-map (kbd "C-. a") 'eglot-code-actions)
(define-key eglot-mode-map (kbd "C-. =") 'eglot-format-buffer)
(define-key eglot-mode-map (kbd "C-. r") 'eglot-rename)
(define-key eglot-mode-map (kbd "C-. h") 'eldoc-doc-buffer)
(define-key eglot-mode-map (kbd "C-. q") 'eglot-shutdown)
(define-key eglot-mode-map (kbd "C-. g") 'xref-find-references)
(define-key eglot-mode-map (kbd "C-. i") 'eglot-find-implementation)
(define-key eglot-mode-map (kbd "C-. n") 'flymake-goto-next-error)
(define-key eglot-mode-map (kbd "C-. p") 'flymake-goto-prev-error)
#+END_SRC
